<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <title>Offside Outfits</title>
    <meta name="keywords" content="HTML5 Template">
    <meta name="description" content="Molla - Bootstrap eCommerce Template">
    <meta name="author" content="p-themes">
    <link rel="shortcut icon" type="image/x-icon" href=" /productAssets/User-icon.svg">
    <link rel="stylesheet" href="assets/css/bootstrap.min.css">
    <link rel="stylesheet" href="assets/css/style.css">
</head>

<body>
    <div class="page-wrapper">


        <main class="main">
            <nav aria-label="breadcrumb" class="breadcrumb-nav border-0 mb-0">

            </nav>

            <div class="login-page bg-image pt-8 pb-8 pt-md-12 pb-md-12 pt-lg-17 pb-lg-17"
                style="background-image: url('/assets/images/login/Football-rack1.jpeg')">
                <div class="container">
                    <div class="form-box">
                        <div class="form-tab">
                            <ul class="nav nav-pills nav-fill" role="tablist">
                                <li class="nav-item">
                                    <a class="nav-link" id="signin-tab-2" data-toggle="tab" href="#signin-2" role="tab"
                                        aria-controls="signin-2" aria-selected="false">Sign In</a>
                                </li>
                                <li class="nav-item">
                                    <a class="nav-link active" id="register-tab-2" data-toggle="tab" href="#register-2"
                                        role="tab" aria-controls="register-2" aria-selected="true">Register</a>
                                </li>
                            </ul>
                            <div class="tab-content">
                                <div class="tab-pane fade" id="signin-2" role="tabpanel" aria-labelledby="signin-tab-2">

                                    <form id="loginForm" action="/login" method="post">
                                        <p id="login-error" class="error-message" style="color: red;"></p>
                                        <div class="form-group">
                                            <label for="singin-email-2">Email Address *</label>
                                            <input type="text" class="form-control" id="singin-email-2" name="email"
                                                required>
                                        </div>

                                        <div class="form-group">
                                            <label for="singin-password-2">Password *</label>
                                            <input type="password" class="form-control" id="singin-password-2"
                                                name="password" required>
                                        </div>

   
<a class="mb-1" href="/forgot-Password">Forgot Password?</a>



                                        <div class="form-footer mt-1">
                                            <button type="button" class="btn btn-outline-primary-2"
                                                onclick="submitLoginForm()">
                                                <span>LOG IN</span>
                                                <i class="icon-long-arrow-right"></i>
                                            </button>
                                        </div>
                                    </form>

                              


                                </div>

                                <div class="tab-pane fade show active" id="register-2" role="tabpanel"
                                    aria-labelledby="register-tab-2">

                    <form action="/register" method="post" id="register">
                        <p id="main-error" class="error-message" style="color: red;"></p>
                        <% if(errorMessage){ %>
                            <p style="color: red;font-size: large; font-weight: 400;">
                                <%= errorMessage %>
                            </p>
                            <% } %>
                                <div class="form-group">
                                    <label for="fullname">Full Name *</label>
                                    <p id="fullname-error" class="error-message" style="color: red;"></p>
                                    <input type="text" class="form-control" id="register-fullname" name="fullname" required>
                                </div>
                                <div class="form-group">
                                    <label for="email-2">Your email address *</label>
                                    <p id="email-error" class="error-message" style="color: red;"></p>
                                    <input type="email" class="form-control" id="register-email-2" name="email" required>
                                </div>
                                <div class="form-group">
                                    <label for="phone">Phone Number *</label>
                                    <p id="phone-error" class="error-message" style="color: red;"></p>
                                    <div class="input-group">
                                        <input type="tel" class="form-control" id="register-phone" name="phone" required>
                                        <input type="text" class="form-control ml-5" id="referral-code" name="referralCode"
                                            placeholder="Enter Referral Code...">
                                    </div>
                                </div>
                                <div class="form-group">
                                    <label for="password-2">Password *</label>
                                    <p id="password-error" class="error-message" style="color: red;"></p>
                                    <input type="password" class="form-control" id="register-password-2" name="password" required maxlength="20"
                                        pattern="^(?!\s+$)(?=.*\d)(?=.*[A-Z])\S{8,}$"
                                        title="Password must contain at least one digit and one uppercase letter, and be at least 8 characters long. No spaces at the beginning or in the middle are allowed.">
                                    <small id="password-pattern-label" class="form-text text-muted">Password must contain at least one digit and one
                                        uppercase letter, and be at least 8 characters long.</small>
                                </div>
                                <div class="form-group">
                                    <label for="confirm-password">Confirm Password *</label>
                                    <p id="confirm-password-error" class="error-message" style="color: red;"></p>
                                    <input type="password" class="form-control" id="confirm-password" name="confirmPassword" required
                                        maxlength="20" pattern="^(?!\s+$)(?=.*\d)(?=.*[A-Z])\S{8,}$"
                                        title="Password must contain at least one digit and one uppercase letter, and be at least 8 characters long. No spaces at the beginning or in the middle are allowed."
                                        onblur="checkPasswordMatch()">
                                </div>
                                <div class="form-footer">
                                    <button type="button" class="btn btn-outline-primary-2" onclick="submitForm()">
                                        <span>SIGN UP</span>
                                        <i class="icon-long-arrow-right"></i>
                                    </button>
                                </div>
                    </form>




                                </div>
                            </div>
                        </div><!-- End .tab-content -->
                    </div><!-- End .form-tab -->
                </div><!-- End .form-box -->
            </div><!-- End .container -->
    </div><!-- End .login-page section-bg -->
    </main><!-- End .main -->

<footer class="footer footer-2">
    <div class="footer-middle">
        <div class="container">
            <div class="row justify-content-center"> <!-- Center aligning content -->
                <div class="col-md-6">
                    <div class="widget widget-about text-center"> <!-- Center aligning content -->
                        <img style="margin-left: 120px;" src="assets/images/LogoFooter.png" class="footer-logo"
                            alt="Footer Logo" width="280" height="25">
                        <p>Offside Outfit is your premier destination for football jerseys, catering to the passion of
                            fans worldwide.
                            With a curated collection of high-quality gear representing teams from various leagues. Our
                            commitment to excellence ensures that every
                            garment is crafted with premium materials, guaranteeing comfort and durability on and off
                            the pitch.</p>
                    </div><!-- End .widget-about -->
                </div><!-- End .col-md-6 -->
            </div><!-- End .row -->
        </div><!-- End .container -->
    </div><!-- End .footer-middle -->

    <div class="footer-bottom">
        <div class="container">
            <div class="row">
                <div class="col-md-12">
                    <p class="footer-copyright text-center">Copyright &copy; 2024 Offside Outfits. All Rights Reserved.
                    </p>
                </div><!-- End .col-md-12 -->
            </div><!-- End .row -->
        </div><!-- End .container -->
    </div><!-- End .footer-bottom -->
</footer>


    </div><!-- End .page-wrapper -->
    <button id="scroll-top" title="Back to Top"><i class="icon-arrow-up"></i></button>

    <!-- Mobile Menu -->

    <!-- Plugins JS File -->
    <script src="assets/js/jquery.min.js"></script>
    <script src="assets/js/bootstrap.bundle.min.js"></script>
    <script src="assets/js/jquery.hoverIntent.min.js"></script>
    <script src="assets/js/jquery.waypoints.min.js"></script>
    <script src="assets/js/superfish.min.js"></script>
    <script src="assets/js/owl.carousel.min.js"></script>
    <script src="assets/js/main.js"></script>

    <script>
       
        window.onload = function () {
            window.scroll(0, window.innerHeight / 4.5);  
        };
    </script>
   
    <script>

    function checkPasswordMatch() {
        const password = document.getElementById('register-password-2').value;
        const confirmPassword = document.getElementById('confirm-password').value;
        const confirmPasswordError = document.getElementById('confirm-password-error');
       
          const pattern = /^(?=.*[A-Z])(?=.*\d)/;

        if (password !== confirmPassword) {
            confirmPasswordError.textContent = 'Passwords do not match';
            return false
        } else if (!pattern.test(password)) {
            confirmPasswordError.textContent = 'Password must contain at least one uppercase letter and one number';
            return false;
        } else {
            confirmPasswordError.textContent = '';
            return true
        }
    }


        function getElementValue(id) {
            const element = document.getElementById(id);
            return element.value;
        }

        function validateInput(inputId, pattern, errorId, errorMessage) {
            const inputValue = getElementValue(inputId);
            const errorElement = document.getElementById(errorId);

            if (inputValue.trim() === '') {
                errorElement.innerText = errorMessage;
                return false;
            } else if (pattern.test(inputValue)) {
                errorElement.innerText = '';
                return true;
            } else {
                errorElement.innerText = 'Please enter a valid ' + errorMessage.toLowerCase() + '.';
                return false;
            }
        }

        function validateName() {
            return validateInput('register-fullname', /^[A-Za-z]+(\s[A-Za-z]+)*$/, 'fullname-error', 'Name');
        }

        function validateEmail() {
            return validateInput('register-email-2', /^[^\s@]+@[^\s@]+\.[^\s@]+$/, 'email-error', 'Email address');
        }

        function validatePhone() {
            return validateInput('register-phone', /^\d{10}$/, 'phone-error', '10-digit phone number');
        }

        document.addEventListener('DOMContentLoaded', function () {
            const fullNameInput = document.getElementById('register-fullname');
            const emailInput = document.getElementById('register-email-2');
            const phoneInput = document.getElementById('register-phone');

            fullNameInput.addEventListener('input', validateName);
            emailInput.addEventListener('input', validateEmail);
            phoneInput.addEventListener('input', validatePhone);
        });

        function submitForm() {
            if (validateName() && validateEmail() && validatePhone()&& checkPasswordMatch()) {
                document.getElementById('register').submit();
            } else {
                document.getElementById('main-error').innerText = 'CANNOT SUBMIT';
            }
        }
    </script>


    <script>
        function submitLoginForm() {
            const email = document.getElementById('singin-email-2').value;
            const password = document.getElementById('singin-password-2').value;

            fetch("/login", {
                method: "POST",
                headers: {
                    "Content-Type": "application/json",
                },
                body: JSON.stringify({ email, password }),
            })
                .then(response => {
                    if (!response.ok) {
                        throw new Error("Network response was not ok");
                    }
                    return response.json();
                })
                .then(data => {
                    const loginErrorElement = document.getElementById('login-error');

                    if (data.errorMessage) {
                        console.error(data.errorMessage);
                        loginErrorElement.innerText = data.errorMessage;
                    } else {

                        window.location.href = "/home";
                    }
                })
                .catch(error => {
                    console.error("There was a problem with the fetch operation:", error);
                });
        }

    </script>





</body>



</html>