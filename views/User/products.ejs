<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <title>Offside Outfits</title>
    <meta name="keywords" content="HTML5 Template">
    <meta name="description" content="Molla - Bootstrap eCommerce Template">
    <meta name="author" content="p-themes">
    <!-- Favicon -->
    <link rel="shortcut icon" type="image/x-icon" href=" /productAssets/User-icon.svg">
    <!-- Plugins CSS File -->
    <link rel="stylesheet" href="assets/css/bootstrap.min.css">
    <!-- Main CSS File -->
    <link rel="stylesheet" href="assets/css/style.css">
    <link rel="stylesheet" href="assets/css/plugins/owl-carousel/owl.carousel.css">
    <link rel="stylesheet" href="assets/css/plugins/magnific-popup/magnific-popup.css">
    <link rel="stylesheet" href="assets/css/plugins/nouislider/nouislider.css">
</head>

<body>
    <div class="page-wrapper">
        <header class="header ">
            <div class="header-middle">
                <div class="header-top">
                    <div class="container-fluid">
                        <div class="header-left m-4">

                        </div><!-- End .header-left -->

                        <div class="header-right">
                            <ul class="top-menu">
                                <li>
                                    <a href="#">Links</a>
                                    <ul>
                                        <li><a href="tel:#"><i class="icon-phone"></i>Call: +0123 456 789</a></li>
                                        <li><a href="about.html">About Us</a></li>
                                        <li><a href="contact.html">Contact Us</a></li>
                                        <li style="display: none;"><a href="#signin-modal" data-toggle="modal"><i
                                                    class="icon-user"></i>Login</a>
                                        </li>
                                    </ul>
                                </li>
                            </ul><!-- End .top-menu -->
                        </div><!-- End .header-right -->
                    </div><!-- End .container-fluid -->
                </div><!-- End .header-top -->

                <div class="header-middle ">
                    <div class="container-fluid">
                        <div class="header-left">


                            <a href="/home" class="logo">
                                <img src="assets/images/Logo1.png" alt="Molla Logo" width="50" height="25">
                            </a>

                            <nav class="main-nav">
                                <ul class="menu sf-arrows">
                                    <li class="megamenu-container ">
                                        <a href="/home" class="">Home</a>
                                    </li>
                                    <li class="active">
                                        <a href="" class=" ">Shop</a>


                                    </li>
                                    <li>
                                        <a href="" class="">Product</a>
                                    </li>
                                    <li>
                                        <a href="#" class="">Pages</a>
                                    </li>
                                    <li>
                                        <a href="" class="">Blog</a>
                                    </li>
                                    <li>
                                        <a href="" class="">Elements</a>


                                    </li>
                                </ul><!-- End .menu -->
                            </nav><!-- End .main-nav -->
                        </div><!-- End .header-left -->

                        <div class="header-right">

                            <div class="header-search">
                                <a href="#" class="search-toggle" role="button"><i class="icon-search"></i></a>
                                <form action="#" method="get">
                                    <div class="header-search-wrapper">
                                        <label for="q" class="sr-only">Search</label>
                                        <input type="search" class="form-control" name="q" id="q"
                                            placeholder="Search in..." required>
                                    </div><!-- End .header-search-wrapper -->
                                </form>
                            </div><!-- End .header-search -->

                            <a href="/wishlist" class="wishlist-link">
                                <i class="icon-heart-o"></i>
                            </a>

                            <div class="cart-dropdown position-relative">
                                <a href="/cart" class="dropdown-toggle" role="button"
                                    style="position: relative; display: inline-block;">
                                    <i class="icon-shopping-cart">
                                        <span id="cart-count" class="badge badge-danger"
                                            style="position: absolute; top: 0; right: 0; font-size: 10px; padding: 2px 5px;"></span>
                                    </i>
                                </a>
                            </div>



                            <div class=" cart-dropdown">
                                <a href="/profile" class="dropdown-toggle" role="button" aria-haspopup="true"
                                    aria-expanded="false" data-display="static">
                                    <i class="icon-user"> </i>

                                </a>
                            </div>

                        </div><!-- End .header-right -->
                    </div><!-- End .container-fluid -->
                </div><!-- End .header-middle -->
            </div>
        </header><!-- End .header -->

        <main class="main">
            <div class="page-header text-center" style="background-image: url('assets/images/page-header-bg.jpg')">
                <div class="container-fluid">
                    <h1 class="page-title">Elevate Your Game, Wear Your <br>
                        Passion-Unleashing Style in Every Stride!<span>Shop</span></h1>
                </div><!-- End .container-fluid -->
            </div>
            <nav aria-label="breadcrumb" class="breadcrumb-nav border-0 m-5">

            </nav><!-- End .breadcrumb-nav -->
            <div class="page-content">
                <div class="container-fluid">
                    <div class="toolbox">
                        <div class="toolbox-left">
                            <a href="#" class="sidebar-toggler"><i class="icon-bars"></i>Filters</a>
                        </div>

                        <div class="toolbox">
                            <!-- <div class="toolbox-info">
                                Showing <span>12 of 56</span> Products
                            </div> -->
                        </div>

                        <!-- <div class="toolbox-right">
                            <div class="toolbox-sort">
                                <label for="sortby">Sort by:</label>
                                <div class="select-custom">
                                    <select name="sortby" id="sortby" class="form-control">
                                        <option value="popularity" selected="selected">Most Popular</option>
                                        <option value="rating">Most Rated</option>
                                        <option value="date">Date</option>
                                    </select>
                                </div>
                            </div>
                        
                            <div class="toolbox-sort">
                                <label for="priceSort">Price:</label>
                                <div class="select-custom">
                                    <select name="priceSort" id="priceSort" class="form-control">
                                        <option value="asc">Low to High</option>
                                        <option value="desc">High to Low</option>
                                    </select>
                                </div>
                            </div>
                        
                            <button onclick="applyFilters()">Filter</button>
                        </div> -->


                    </div><!-- End .toolbox -->


                    <div class="products">
                        <div class="row">
                            <% products.forEach(product=> { %>
                                <% if (product.is_listed==="1" ) { %>
                                    <div class="col-6 col-md-4 col-lg-4 col-xl-3 col-xxl-2">
                                        <div class="product">
                                            <div class="card card-product-grid">
                                                <a href="/products/<%= product._id %>">
                                                    <img src="/productAssets/<%= product.images[0] %>" alt="Product image"
                                                        class="product-image" style="height: 280px;width: 285px;">
                                                </a>
                    
                                                <div class="product-action-vertical">
                                                    <a href="#" class="btn-product-icon btn-wishlist btn-expandable"><span>add to
                                                            wishlist</span></a>
                                                </div>
                                            </div>
                    
                                            <div class="product-body">
                                                <div class="product-cat">
                                                    <a href="#">
                                                        <%= product.brand %>
                                                    </a>
                                                </div><!-- End .product-cat -->
                                                <h3 class="product-title">
                                                    <a href="/product/<%= product._id %>">
                                                        <%= product.pname %>
                                                    </a>
                                                </h3><!-- End .product-title -->
                    
                                                <div class="product-price">
                                                    <% if (product.priceAfterDiscount !==product.price) { %>
                                                        <del>Rs:<%= product.price %></del><pre>  </pre> Rs:<%= product.priceAfterDiscount.toFixed(2) %>
                                                            <% } else { %>
                                                                Rs:<%= product.price %>
                                                                    <% } %>
                                                </div><!-- End .product-price -->
                                            </div><!-- End .product-body -->
                                        </div><!-- End .product -->
                                    </div><!-- End .col-6 col-md-4 col-lg-4 col-xl-3 col-xxl-2 -->
                                    <% } %>
                                        <% }); %>
                        </div><!-- End .row -->
                    </div>



                    <div class="load-more-container text-center">
                        <a href="#" class="btn btn-outline-darker btn-load-more">More Products <i
                                class="icon-refresh"></i></a>
                    </div><!-- End .load-more-container -->
                </div><!-- End .products -->

                <div class="sidebar-filter-overlay"></div>

        <aside class="sidebar-shop sidebar-filter">
            <div class="sidebar-filter-wrapper">
                <div class="widget widget-clean">
                    <a href="#" class="sidebar-filter-clear" onclick="clearAll()">Clear All</a>
                </div>
        
                <!-- Sort and Filter Widget -->
                <div class="widget widget-collapsible">
                    <h3 class="widget-title">
                        <a data-toggle="collapse" href="#widget-2" role="button" aria-expanded="true" aria-controls="widget-2">
                            Sort & Filter
                        </a>
                    </h3>
                    <div class="collapse show" id="widget-2">
                        <div class="widget-body">
                            <div class="filter-items">
                               
                                <fieldset>
                                    <legend><b>Name Sorting</b></legend>
                                    <div class="filter-item">
                                        <div class="custom-control custom-radio">
                                            <input type="radio" class="custom-control-input" id="name-az" name="sort-type"
                                                value="aToZ">
                                            <label class="custom-control-label" for="name-az">A-Z</label>
                                        </div>
                                    </div>
                                    <div class="filter-item">
                                        <div class="custom-control custom-radio">
                                            <input type="radio" class="custom-control-input" id="name-za" name="sort-type"
                                                value="zToA">
                                            <label class="custom-control-label" for="name-za">Z-A</label>
                                        </div>
                                    </div>
                                </fieldset>
        
                                <!-- Price Sorting -->
                                <fieldset>
                                    <legend><b>Price Sorting</b> </legend>
                                    <div class="filter-item">
                                        <div class="custom-control custom-radio">
                                            <input type="radio" class="custom-control-input" id="price-lh" name="sort-type"
                                                value="lowToHigh">
                                            <label class="custom-control-label" for="price-lh">Low to High</label>
                                        </div>
                                    </div>
                                    <div class="filter-item">
                                        <div class="custom-control custom-radio">
                                            <input type="radio" class="custom-control-input" id="price-hl" name="sort-type"
                                                value="highToLow">
                                            <label class="custom-control-label" for="price-hl">High to Low</label>
                                        </div>
                                    </div>
                                </fieldset>
        
                                <!-- Category Filtering -->
                                <fieldset>
                                    <legend><b>Category Filtering</b></legend>
                                
                                    <% for (const category of categories) { %>
                                        <div class="filter-item">
                                            <div class="custom-control custom-checkbox">
                                                <input type="checkbox" class="custom-control-input" id="<%= category._id %>" name="category-filter"
                                                    value="<%= category._id %>">
                                                <label class="custom-control-label" for="<%= category._id %>">
                                                    <%= category.cName %>
                                                </label>
                                            </div>
                                        </div>
                                        <% } %>
                                </fieldset>

                            </div>
                        </div>
                    </div>
                </div>
        
                <button class="btn btn-outline-dark btn-round" onclick="applyFilters()">Apply Filter</button>
            </div>
        </aside>


            </div><!-- End .container-fluid -->
    </div>
    </main>



    <footer class="footer footer-2">
        <div class="footer-middle">
            <div class="container-fluid">
                <div class="row">
                    <div class="col-sm-12 col-lg-4">
                        <div class="widget widget-about">
                            <img src="assets/images/LogoFooter.png" class="footer-logo" alt="Footer Logo" width="280"
                                height="25">
                            <p>Praesent dapibus, neque id cursus ucibus, tortor neque egestas augue, eu vulputate
                                magna eros eu erat. Aliquam erat volutpat. Nam dui mi, tincidunt quis, accumsan
                                porttitor, facilisis luctus, metus. </p>

                            <div class="widget-about-info">
                                <div class="row">


                                </div><!-- End .row -->
                            </div><!-- End .widget-about-info -->
                        </div><!-- End .widget about-widget -->
                    </div><!-- End .col-sm-12 col-lg-4 -->

                    <div class="col-sm-4 col-lg-2">
                        <div class="widget">
                            <h4 class="widget-title">Information</h4><!-- End .widget-title -->

                            <ul class="widget-list">
                                <li><a href="about.html">About Molla</a></li>
                                <li><a href="#">How to shop on Molla</a></li>
                                <li><a href="faq.html">FAQ</a></li>
                                <li><a href="contact.html">Contact us</a></li>
                                <li><a href="login.html">Log in</a></li>
                            </ul><!-- End .widget-list -->
                        </div><!-- End .widget -->
                    </div><!-- End .col-sm-4 col-lg-2 -->

                    <div class="col-sm-4 col-lg-2">
                        <div class="widget">
                            <h4 class="widget-title">Customer Service</h4><!-- End .widget-title -->

                            <ul class="widget-list">
                                <li><a href="#">Payment Methods</a></li>
                                <li><a href="#">Money-back guarantee!</a></li>
                                <li><a href="#">Returns</a></li>
                                <li><a href="#">Shipping</a></li>
                                <li><a href="#">Terms and conditions</a></li>
                                <li><a href="#">Privacy Policy</a></li>
                            </ul><!-- End .widget-list -->
                        </div><!-- End .widget -->
                    </div><!-- End .col-sm-4 col-lg-2 -->

                    <div class="col-sm-4 col-lg-2">
                        <div class="widget">
                            <h4 class="widget-title">My Account</h4><!-- End .widget-title -->

                            <ul class="widget-list">
                                <li><a href="#">Sign In</a></li>
                                <li><a href="">View Cart</a></li>
                                <li><a href="#">My Wishlist</a></li>
                                <li><a href="#">Track My Order</a></li>
                                <li><a href="#">Help</a></li>
                            </ul><!-- End .widget-list -->
                        </div><!-- End .widget -->
                    </div><!-- End .col-sm-4 col-lg-2 -->

                    <div class="col-sm-6 col-lg-2">
                        <div class="widget widget-newsletter">
                            <h4 class="widget-title">Newsletter</h4><!-- End .widget-title -->

                            <p>Aliquam erat volutpat. Nam dui mi, tincidunt quis, accumsan.</p>

                            <form action="#">
                                <div class="input-group">
                                    <input type="email" class="form-control" placeholder="Enter your Email Address"
                                        aria-label="Email Adress" required>
                                    <div class="input-group-append">
                                        <button class="btn btn-dark" type="submit"><i
                                                class="icon-long-arrow-right"></i></button>
                                    </div><!-- .End .input-group-append -->
                                </div><!-- .End .input-group -->
                            </form>
                        </div><!-- End .widget -->
                    </div><!-- End .col-sm-6 col-lg-2 -->
                </div><!-- End .row -->
            </div><!-- End .container-fluid -->
        </div><!-- End .footer-middle -->

        <div class="footer-bottom">
            <div class="container-fluid">
                <p class="footer-copyright">Copyright.</p>
                <!-- End .footer-copyright -->
                <ul class="footer-menu">
                    <li><a href="#">Terms Of Use</a></li>
                    <li><a href="#">Privacy Policy</a></li>
                </ul><!-- End .footer-menu -->

                <div class="social-icons social-icons-color">
                    <span class="social-label">Socials</span>
                    <a href="#" class="social-icon social-facebook" title="Facebook" target="_blank"><i
                            class="icon-facebook-f"></i></a>
                    <a href="#" class="social-icon social-twitter" title="Twitter" target="_blank"><i
                            class="icon-twitter"></i></a>
                    <a href="#" class="social-icon social-instagram" title="Instagram" target="_blank"><i
                            class="icon-instagram"></i></a>
                    <a href="#" class="social-icon social-youtube" title="Youtube" target="_blank"><i
                            class="icon-youtube"></i></a>
                    <a href="#" class="social-icon social-pinterest" title="Pinterest" target="_blank"><i
                            class="icon-pinterest"></i></a>
                </div><!-- End .soial-icons -->
            </div><!-- End .container-fluid -->
        </div><!-- End .footer-bottom -->
    </footer><!-- End .footer -->
    </div><!-- End .page-wrapper -->
    <button id="scroll-top" title="Back to Top"><i class="icon-arrow-up"></i></button>
    <div class="social-icons">
        <a href="#" class="social-icon" target="_blank" title="Facebook"><i class="icon-facebook-f"></i></a>
        <a href="#" class="social-icon" target="_blank" title="Twitter"><i class="icon-twitter"></i></a>
        <a href="#" class="social-icon" target="_blank" title="Instagram"><i class="icon-instagram"></i></a>
        <a href="#" class="social-icon" target="_blank" title="Youtube"><i class="icon-youtube"></i></a>
    </div><!-- End .social-icons -->
    </div><!-- End .mobile-menu-wrapper -->
    </div><!-- End .mobile-menu-container -->



    <!-- Plugins JS File -->
    <script src="assets/js/jquery.min.js"></script>
    <script src="assets/js/bootstrap.bundle.min.js"></script>
    <script src="assets/js/jquery.hoverIntent.min.js"></script>
    <script src="assets/js/jquery.waypoints.min.js"></script>
    <script src="assets/js/superfish.min.js"></script>
    <script src="assets/js/owl.carousel.min.js"></script>
    <script src="assets/js/wNumb.js"></script>
    <script src="assets/js/bootstrap-input-spinner.js"></script>
    <script src="assets/js/jquery.magnific-popup.min.js"></script>
    <script src="assets/js/nouislider.min.js"></script>
    <!-- Main JS File -->
    <script src="assets/js/main.js"></script>
    <script src="https://code.jquery.com/jquery-3.6.4.min.js"></script>



    <script>
        function getElementValue(id) {
            const element = document.getElementById(id);
            return element ? element.value : null;
        }

        function updateCartCount(count) {
            const cartCountElement = document.getElementById('cart-count');
            if (cartCountElement) {
                cartCountElement.textContent = count;
            }
        }

    </script>


 <script>
    function applyFilters() {
        const priceSort = document.querySelector('input[name="sort-type"][value^="lowToHigh"]:checked')?.value ||
            document.querySelector('input[name="sort-type"][value^="highToLow"]:checked')?.value;

        const nameSort = document.querySelector('input[name="sort-type"][value^="aToZ"]:checked')?.value ||
            document.querySelector('input[name="sort-type"][value^="zToA"]:checked')?.value;

        const selectedCategories = Array.from(document.querySelectorAll('input[name="category-filter"]:checked')).map(checkbox => checkbox.value);

        fetch(`/products/sort?priceSort=${priceSort}&nameSort=${nameSort}&selectedCategories=${selectedCategories.join(',')}`)
            .then(response => response.json())
            .then(data => {
                const productsContainer = document.querySelector('.products .row');

                productsContainer.innerHTML = '';

                data.products.forEach(updatedProduct => {
                    if (updatedProduct.is_listed === "1") {
                        const productItem = document.createElement('div');
                        productItem.classList.add('col-6', 'col-md-4', 'col-lg-4', 'col-xl-3', 'col-xxl-2', 'product-item');
                        productItem.innerHTML = `
                            <div class="product">
                                <div class="card card-product-grid">
                                    <a href="/products/${updatedProduct._id}">
                                        <img src="/productAssets/${updatedProduct.images[0]}" alt="Product image" class="product-image" style="height: 280px; width: 285px;">
                                    </a>
                                    <div class="product-action-vertical">
                                        <a href="#" class="btn-product-icon btn-wishlist btn-expandable"><span>add to wishlist</span></a>
                                    </div>
                                </div>
                                <div class="product-body">
                                    <div class="product-cat">
                                        <a href="#">${updatedProduct.brand}</a>
                                    </div>
                                    <h3 class="product-title">
                                        <a href="/product/${updatedProduct._id}">${updatedProduct.pname}</a>
                                    </h3>
                                    <div class="product-price">
                                        Rs:${updatedProduct.price}
                                    </div>
                                </div>
                            </div>
                        `;
                        productsContainer.appendChild(productItem);
                    }
                });
            })
            .catch(error => console.error('Error:', error));
    }

    function clearAll() {
           
            window.location.href =  '/products';
        }

</script>

<script>
    document.addEventListener('DOMContentLoaded', function () {
        const urlParams = new URLSearchParams(window.location.search);
        const selectedCategories = urlParams.get('selectedCategories');

        if (selectedCategories) {
            const categoryIds = selectedCategories.split(',');
            categoryIds.forEach(categoryId => {
                const checkbox = document.getElementById(categoryId);
                if (checkbox) {
                    checkbox.checked = true;
                }
            });
        }
    });
</script>




</body>

</html>